<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„è™›æ“¬èŒå¯µ (My Kawaii Pet)</title>
    <style>
        /* --- 1. è¦–è¦ºé¢¨æ ¼ (Kawaii Style) --- */
        @import url('https://fonts.googleapis.com/css2?family=Varela+Round&display=swap');

        :root {
            --bg-color: #FFF0F5; /* è–°è¡£è‰ç´… */
            --primary: #FFB7B2;   /* æ·ºç²‰ */
            --secondary: #B5EAD7; /* è–„è·ç¶  */
            --danger: #FF9AA2;    /* è­¦å‘Šç´… */
            --text: #66545e;      /* æ·±ç°ç´« */
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Varela Round', sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        #app {
            width: 100%;
            max-width: 400px; /* æ‰‹æ©Ÿæ¨¡æ“¬å¯¬åº¦ */
            height: 90vh;
            max-height: 800px;
            background: var(--card-bg);
            border-radius: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 8px solid white;
        }

        /* é€šç”¨ UI å…ƒä»¶ */
        h1, h2, h3 { text-align: center; color: var(--text); }
        
        .btn {
            background: var(--primary);
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.1s;
            font-family: inherit;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
            margin: 5px;
        }
        .btn:active { transform: translateY(4px); box-shadow: none; }
        .btn-secondary { background: var(--secondary); color: #555; }
        .btn-danger { background: var(--danger); }

        /* --- 2. å‰µå»ºç•«é¢ (Creation Screen) --- */
        #creation-screen {
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
            gap: 15px;
        }

        .form-group { margin-bottom: 10px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        select, input[type="range"], input[type="text"] {
            width: 100%;
            padding: 10px;
            border-radius: 15px;
            border: 2px solid #eee;
            font-family: inherit;
            box-sizing: border-box;
            font-size: 1rem;
        }

        /* é è¦½å€ */
        #preview-box {
            text-align: center;
            font-size: 80px;
            margin: 10px 0;
            transition: all 0.3s ease;
        }

        /* --- 3. éŠæˆ²ç•«é¢ (Game Screen) --- */
        #game-screen {
            display: none; /* é è¨­éš±è— */
            flex-direction: column;
            height: 100%;
            padding: 20px;
            box-sizing: border-box;
        }

        /* ç‹€æ…‹æ¢ */
        .stats-container {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 20px;
            margin-bottom: 20px;
        }
        .stat-row { display: flex; align-items: center; margin-bottom: 8px; }
        .stat-icon { width: 30px; font-size: 20px; }
        .progress-bar-bg {
            flex-grow: 1;
            height: 15px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-bar-fill {
            height: 100%;
            width: 100%;
            background: var(--primary);
            transition: width 0.5s ease, background 0.3s;
        }
        .fill-love { background: #FF9AA2; }
        .fill-hunger { background: #FFDAC1; }

        /* å¯µç‰©é¡¯ç¤ºå€ */
        .pet-stage {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            background: url('data:image/svg+xml;utf8,<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="2" cy="2" r="2" fill="%23f0f0f0"/></svg>'); 
            border-radius: 20px;
            margin-bottom: 20px;
        }

        #pet-display {
            font-size: 120px;
            cursor: pointer;
            user-select: none;
            transition: transform 0.2s;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1));
        }
        
        /* å¯µç‰©å‹•ç•« */
        @keyframes bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.05); }
        }
        .anim-bounce { animation: bounce 0.6s ease; }

        @keyframes eat {
            0% { transform: scale(1); }
            50% { transform: scale(0.9) rotate(-10deg); }
            100% { transform: scale(1); }
        }
        .anim-eat { animation: eat 0.4s ease; }

        /* äº’å‹•é¸å–® */
        .actions-menu {
            display: flex;
            justify-content: space-around;
            background: white;
            padding: 15px 0;
            border-radius: 20px;
        }
        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text);
            font-family: inherit;
        }
        .action-icon {
            width: 50px;
            height: 50px;
            background: #fff;
            border: 2px solid var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 5px;
            transition: 0.2s;
        }
        .action-btn:active .action-icon { transform: scale(0.9); background: var(--secondary); }

        /* æµ®å‹•è¡¨æƒ…ç¬¦è™Ÿ */
        .floater {
            position: absolute;
            font-size: 30px;
            animation: floatUp 1s ease-out forwards;
            pointer-events: none;
            z-index: 10;
        }
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }

        /* æ¨¡æ…‹æ¡† (å–ä»£ confirm) */
        .modal-overlay {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(2px);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            width: 80%;
            max-width: 280px;
            border: 2px solid var(--primary);
        }
        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

    </style>
</head>
<body>

<div id="app">
    <!-- å‰µå»ºç•«é¢ -->
    <div id="creation-screen">
        <h2>Adopt a Pet ğŸ¾</h2>
        
        <div id="preview-box">ğŸ±</div>

        <div class="form-group">
            <label>Species (ç¨®é¡)</label>
            <select id="species-select" onchange="updatePreview()">
                <option value="ğŸ±">Cat (è²“)</option>
                <option value="ğŸ¶">Dog (ç‹—)</option>
                <option value="ğŸ°">Rabbit (å…”)</option>
                <option value="ğŸ˜">Elephant (å¤§è±¡)</option>
                <option value="ğŸ¦">Lion (ç…å­)</option>
                <option value="ğŸ¼">Panda (ç†Šè²“)</option>
                <option value="ğŸ¦„">Unicorn (ç¨è§’ç¸)</option>
            </select>
        </div>

        <div class="form-group">
            <label>Name (åå­—)</label>
            <input type="text" id="pet-name" placeholder="Enter name..." maxlength="10">
        </div>

        <div class="form-group">
            <label>Eye Size (çœ¼ç›å¤§å°)</label>
            <input type="range" id="eye-size" min="0.8" max="1.5" step="0.1" value="1" oninput="updatePreview()">
        </div>

        <div class="form-group">
            <label>Personality (æ€§æ ¼)</label>
            <select id="personality">
                <option value="Cheerful">Cheerful (é–‹æœ—)</option>
                <option value="Lazy">Lazy (æ…µæ‡¶)</option>
                <option value="Greedy">Glutton (è²ªåƒ)</option>
            </select>
        </div>

        <button class="btn" onclick="createPet()">Generate Pet âœ¨</button>
    </div>

    <!-- éŠæˆ²ç•«é¢ -->
    <div id="game-screen">
        <div class="stats-container">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3 id="display-name" style="margin:0;">Pet</h3>
                <small id="display-personality" style="color:#888; background:#eee; padding:2px 8px; border-radius:10px;">Normal</small>
            </div>
            
            <div style="margin-top: 10px;">
                <div class="stat-row">
                    <span class="stat-icon">ğŸ—</span>
                    <div class="progress-bar-bg">
                        <div id="bar-hunger" class="progress-bar-fill fill-hunger" style="width: 100%;"></div>
                    </div>
                </div>
                <div class="stat-row">
                    <span class="stat-icon">â¤ï¸</span>
                    <div class="progress-bar-bg">
                        <div id="bar-love" class="progress-bar-fill fill-love" style="width: 100%;"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="pet-stage">
            <div id="pet-display" onclick="interact('pet')">ğŸ±</div>
        </div>

        <div class="actions-menu">
            <button class="action-btn" onclick="interact('feed')">
                <div class="action-icon" style="border-color: #FFDAC1;">ğŸ–</div>
                <span>Meal</span>
            </button>
            <button class="action-btn" onclick="interact('snack')">
                <div class="action-icon" style="border-color: #FF9AA2;">ğŸ©</div>
                <span>Snack</span>
            </button>
            <button class="action-btn" onclick="interact('pet')">
                <div class="action-icon" style="border-color: #B5EAD7;">ğŸ‘‹</div>
                <span>Pet</span>
            </button>
            <button class="action-btn" onclick="showResetModal()">
                <div class="action-icon" style="border-color: #ccc;">ğŸ—‘ï¸</div>
                <span>Reset</span>
            </button>
        </div>
    </div>

    <!-- è‡ªå®šç¾©æ¨¡æ…‹æ¡† (å–ä»£ confirm) -->
    <div id="reset-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Are you sure? ğŸ¥º</h3>
            <p>This will say goodbye to your pet forever!</p>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeResetModal()">Cancel</button>
                <button class="btn btn-danger" onclick="confirmReset()">Yes, Bye Bye</button>
            </div>
        </div>
    </div>
</div>

<script>
    /* --- JavaScript é‚è¼¯ --- */
    
    // éŠæˆ²ç‹€æ…‹ç‰©ä»¶ (In-Memory State)
    let gameState = {
        pet: null 
    };

    // 1. åˆå§‹åŒ–æª¢æŸ¥
    window.onload = function() {
        // ç‚ºäº†æ¼”ç¤ºç©©å®šæ€§ï¼Œæˆ‘å€‘åœ¨é€™å€‹ç‰ˆæœ¬ä¸­ä½¿ç”¨è¨˜æ†¶é«”ç‹€æ…‹
        // å¦‚æœéœ€è¦é•·æœŸä¿å­˜ï¼Œé€šå¸¸æœƒé€£æ¥å¾Œç«¯è³‡æ–™åº«
        if (gameState.pet) {
            startGame();
        } else {
            document.getElementById("creation-screen").style.display = "flex";
            document.getElementById("game-screen").style.display = "none";
            updatePreview();
        }
    };

    // 2. å‰µå»ºèˆ‡é è¦½
    function updatePreview() {
        const species = document.getElementById("species-select").value;
        const size = document.getElementById("eye-size").value;
        const preview = document.getElementById("preview-box");
        
        preview.textContent = species;
        preview.style.transform = `scale(${size})`;
    }

    function createPet() {
        const nameInput = document.getElementById("pet-name").value;
        const name = nameInput.trim() || "Baby";
        const species = document.getElementById("species-select").value;
        const eyeSize = document.getElementById("eye-size").value;
        const personality = document.getElementById("personality").value;

        gameState.pet = {
            name: name,
            species: species,
            eyeSize: eyeSize,
            personality: personality,
            hunger: 100, // 0-100
            love: 100,   // 0-100
        };

        startGame();
    }

    // 3. é–‹å§‹éŠæˆ²èˆ‡æ¸²æŸ“
    let gameInterval;

    function startGame() {
        document.getElementById("creation-screen").style.display = "none";
        document.getElementById("game-screen").style.display = "flex";
        
        // è¨­å®šå¤–è§€
        const petDisplay = document.getElementById("pet-display");
        petDisplay.textContent = gameState.pet.species;
        petDisplay.style.transform = `scale(${gameState.pet.eyeSize})`;

        document.getElementById("display-name").textContent = gameState.pet.name;
        document.getElementById("display-personality").textContent = gameState.pet.personality;

        updateUI();
        
        // æ¸…é™¤èˆŠçš„è¨ˆæ™‚å™¨ä¸¦å•Ÿå‹•æ–°çš„
        if(gameInterval) clearInterval(gameInterval);
        gameInterval = setInterval(gameLoop, 3000);
    }

    function updateUI() {
        if(!gameState.pet) return;

        document.getElementById("bar-hunger").style.width = gameState.pet.hunger + "%";
        document.getElementById("bar-love").style.width = gameState.pet.love + "%";

        // æ”¹è®Šè¡¨æƒ…ï¼šå¦‚æœç‹€æ…‹ä¸å¥½ï¼Œå¯èƒ½æœƒè®Šè‰²
        const petDisplay = document.getElementById("pet-display");
        if (gameState.pet.hunger < 30 || gameState.pet.love < 30) {
            petDisplay.style.filter = "grayscale(0.8) drop-shadow(0 5px 10px rgba(0,0,0,0.1))";
        } else {
            petDisplay.style.filter = "drop-shadow(0 5px 10px rgba(0,0,0,0.1))";
        }
    }

    // 4. éŠæˆ²å¾ªç’°
    function gameLoop() {
        if(!gameState.pet) return;

        // è‡ªç„¶éš¨æ™‚é–“ä¸‹é™
        gameState.pet.hunger = Math.max(0, gameState.pet.hunger - 1);
        gameState.pet.love = Math.max(0, gameState.pet.love - 1);
        
        updateUI();
    }

    // 5. äº’å‹•åŠŸèƒ½
    function interact(type) {
        if(!gameState.pet) return;

        const petEl = document.getElementById("pet-display");
        
        if (type === 'feed') {
            gameState.pet.hunger = Math.min(100, gameState.pet.hunger + 15);
            showFloatEmoji("ğŸ—");
            petEl.classList.add("anim-eat");
        } 
        else if (type === 'snack') {
            // é›¶é£Ÿå¢åŠ å¾ˆå¤šæ„›ï¼Œä½†åªåŠ ä¸€é»é»é£½é£Ÿåº¦
            gameState.pet.hunger = Math.min(100, gameState.pet.hunger + 5);
            gameState.pet.love = Math.min(100, gameState.pet.love + 10);
            showFloatEmoji("ğŸ’•");
            petEl.classList.add("anim-eat");
        } 
        else if (type === 'pet') {
            gameState.pet.love = Math.min(100, gameState.pet.love + 5);
            showFloatEmoji("â¤ï¸");
            petEl.classList.add("anim-bounce");
        }

        updateUI();

        // ç§»é™¤å‹•ç•« class ä»¥ä¾¿ä¸‹æ¬¡è§¸ç™¼
        setTimeout(() => {
            petEl.classList.remove("anim-eat", "anim-bounce");
        }, 600);
    }

    function showFloatEmoji(emoji) {
        const stage = document.querySelector('.pet-stage');
        const el = document.createElement('div');
        el.textContent = emoji;
        el.className = 'floater';
        // éš¨æ©Ÿä½ç½®
        el.style.left = (50 + (Math.random() * 40 - 20)) + '%';
        el.style.top = '40%';
        stage.appendChild(el);
        setTimeout(() => el.remove(), 1000);
    }

    // 6. é‡ç½®åŠŸèƒ½ (Modal é‚è¼¯)
    function showResetModal() {
        document.getElementById("reset-modal").style.display = "flex";
    }

    function closeResetModal() {
        document.getElementById("reset-modal").style.display = "none";
    }

    function confirmReset() {
        gameState.pet = null;
        if(gameInterval) clearInterval(gameInterval);
        
        closeResetModal();
        
        // é‡ç½® UI
        document.getElementById("pet-name").value = "";
        document.getElementById("creation-screen").style.display = "flex";
        document.getElementById("game-screen").style.display = "none";
        
        // è§¸ç™¼ä¸€æ¬¡é è¦½æ›´æ–°ä»¥é‡ç½®è¦–è¦º
        updatePreview();
    }
</script>

</body>
</html>
